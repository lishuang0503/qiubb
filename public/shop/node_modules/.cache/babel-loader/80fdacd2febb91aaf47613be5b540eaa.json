{"remainingRequest":"/opt/homebrew/var/www/qiubb/public/shop/node_modules/babel-loader/lib/index.js!/opt/homebrew/var/www/qiubb/public/shop/node_modules/cache-loader/dist/cjs.js??ref--0-0!/opt/homebrew/var/www/qiubb/public/shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/homebrew/var/www/qiubb/public/shop/src/components/Dropzone/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/homebrew/var/www/qiubb/public/shop/src/components/Dropzone/index.vue","mtime":1675670440393},{"path":"/opt/homebrew/var/www/qiubb/public/shop/babel.config.js","mtime":1675670440385},{"path":"/opt/homebrew/var/www/qiubb/public/shop/node_modules/cache-loader/dist/cjs.js","mtime":1675670541337},{"path":"/opt/homebrew/var/www/qiubb/public/shop/node_modules/babel-loader/lib/index.js","mtime":1675670543334},{"path":"/opt/homebrew/var/www/qiubb/public/shop/node_modules/cache-loader/dist/cjs.js","mtime":1675670541337},{"path":"/opt/homebrew/var/www/qiubb/public/shop/node_modules/vue-loader/lib/index.js","mtime":1675670542371}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEcm9wem9uZSBmcm9tICdkcm9wem9uZSc7CmltcG9ydCAnZHJvcHpvbmUvZGlzdC9kcm9wem9uZS5jc3MnOwovLyBpbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ2FwaS9xaW5pdSc7CgpEcm9wem9uZS5hdXRvRGlzY292ZXIgPSBmYWxzZTsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjbGlja2FibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGRlZmF1bHRNc2c6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn5LiK5Lyg5Zu+54mHJwogICAgfSwKICAgIGFjY2VwdGVkRmlsZXM6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIHRodW1ibmFpbEhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMAogICAgfSwKICAgIHRodW1ibmFpbFdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMjAwCiAgICB9LAogICAgc2hvd1JlbW92ZUxpbms6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIG1heEZpbGVzaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMgogICAgfSwKICAgIG1heEZpbGVzOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMwogICAgfSwKICAgIGF1dG9Qcm9jZXNzUXVldWU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHVzZUN1c3RvbURyb3B6b25lT3B0aW9uczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRlZmF1bHRJbWc6IHsKICAgICAgZGVmYXVsdDogJycsCiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XQogICAgfSwKICAgIGNvdWxkUGFzdGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkcm9wem9uZTogJycsCiAgICAgIGluaXRPbmNlOiB0cnVlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGRlZmF1bHRJbWc6IGZ1bmN0aW9uIGRlZmF1bHRJbWcodmFsKSB7CiAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5pbml0T25jZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaW5pdE9uY2UpIHJldHVybjsKICAgICAgdGhpcy5pbml0SW1hZ2VzKHZhbCk7CiAgICAgIHRoaXMuaW5pdE9uY2UgPSBmYWxzZTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpOwogICAgdmFyIHZtID0gdGhpczsKICAgIHRoaXMuZHJvcHpvbmUgPSBuZXcgRHJvcHpvbmUoZWxlbWVudCwgewogICAgICBjbGlja2FibGU6IHRoaXMuY2xpY2thYmxlLAogICAgICB0aHVtYm5haWxXaWR0aDogdGhpcy50aHVtYm5haWxXaWR0aCwKICAgICAgdGh1bWJuYWlsSGVpZ2h0OiB0aGlzLnRodW1ibmFpbEhlaWdodCwKICAgICAgbWF4RmlsZXM6IHRoaXMubWF4RmlsZXMsCiAgICAgIG1heEZpbGVzaXplOiB0aGlzLm1heEZpbGVzaXplLAogICAgICBkaWN0UmVtb3ZlRmlsZTogJ1JlbW92ZScsCiAgICAgIGFkZFJlbW92ZUxpbmtzOiB0aGlzLnNob3dSZW1vdmVMaW5rLAogICAgICBhY2NlcHRlZEZpbGVzOiB0aGlzLmFjY2VwdGVkRmlsZXMsCiAgICAgIGF1dG9Qcm9jZXNzUXVldWU6IHRoaXMuYXV0b1Byb2Nlc3NRdWV1ZSwKICAgICAgZGljdERlZmF1bHRNZXNzYWdlOiAnPGkgc3R5bGU9Im1hcmdpbi10b3A6IDNlbTtkaXNwbGF5OiBpbmxpbmUtYmxvY2siIGNsYXNzPSJtYXRlcmlhbC1pY29ucyI+JyArIHRoaXMuZGVmYXVsdE1zZyArICc8L2k+PGJyPkRyb3AgZmlsZXMgaGVyZSB0byB1cGxvYWQnLAogICAgICBkaWN0TWF4RmlsZXNFeGNlZWRlZDogJ+WPquiDveS4gOS4quWbvicsCiAgICAgIHByZXZpZXdUZW1wbGF0ZTogJzxkaXYgY2xhc3M9ImR6LXByZXZpZXcgZHotZmlsZS1wcmV2aWV3Ij4gIDxkaXYgY2xhc3M9ImR6LWltYWdlIiBzdHlsZT0id2lkdGg6JyArIHRoaXMudGh1bWJuYWlsV2lkdGggKyAncHg7aGVpZ2h0OicgKyB0aGlzLnRodW1ibmFpbEhlaWdodCArICdweCIgPjxpbWcgc3R5bGU9IndpZHRoOicgKyB0aGlzLnRodW1ibmFpbFdpZHRoICsgJ3B4O2hlaWdodDonICsgdGhpcy50aHVtYm5haWxIZWlnaHQgKyAncHgiIGRhdGEtZHotdGh1bWJuYWlsIC8+PC9kaXY+ICA8ZGl2IGNsYXNzPSJkei1kZXRhaWxzIj48ZGl2IGNsYXNzPSJkei1zaXplIj48c3BhbiBkYXRhLWR6LXNpemU+PC9zcGFuPjwvZGl2PiA8ZGl2IGNsYXNzPSJkei1wcm9ncmVzcyI+PHNwYW4gY2xhc3M9ImR6LXVwbG9hZCIgZGF0YS1kei11cGxvYWRwcm9ncmVzcz48L3NwYW4+PC9kaXY+ICA8ZGl2IGNsYXNzPSJkei1lcnJvci1tZXNzYWdlIj48c3BhbiBkYXRhLWR6LWVycm9ybWVzc2FnZT48L3NwYW4+PC9kaXY+ICA8ZGl2IGNsYXNzPSJkei1zdWNjZXNzLW1hcmsiPiA8aSBjbGFzcz0ibWF0ZXJpYWwtaWNvbnMiPmRvbmU8L2k+IDwvZGl2PiAgPGRpdiBjbGFzcz0iZHotZXJyb3ItbWFyayI+PGkgY2xhc3M9Im1hdGVyaWFsLWljb25zIj5lcnJvcjwvaT48L2Rpdj48L2Rpdj4nLAogICAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIHZhbCA9IHZtLmRlZmF1bHRJbWc7CiAgICAgICAgaWYgKCF2YWwpIHJldHVybjsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgdmFsLm1hcChmdW5jdGlvbiAodiwgaSkgewogICAgICAgICAgICB2YXIgbW9ja0ZpbGUgPSB7CiAgICAgICAgICAgICAgbmFtZTogJ25hbWUnICsgaSwKICAgICAgICAgICAgICBzaXplOiAxMjM0NSwKICAgICAgICAgICAgICB1cmw6IHYKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5hZGRlZGZpbGUuY2FsbChfdGhpcywgbW9ja0ZpbGUpOwogICAgICAgICAgICBfdGhpcy5vcHRpb25zLnRodW1ibmFpbC5jYWxsKF90aGlzLCBtb2NrRmlsZSwgdik7CiAgICAgICAgICAgIG1vY2tGaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2R6LXN1Y2Nlc3MnKTsKICAgICAgICAgICAgbW9ja0ZpbGUucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHotY29tcGxldGUnKTsKICAgICAgICAgICAgdm0uaW5pdE9uY2UgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG1vY2tGaWxlID0gewogICAgICAgICAgICBuYW1lOiAnbmFtZScsCiAgICAgICAgICAgIHNpemU6IDEyMzQ1LAogICAgICAgICAgICB1cmw6IHZhbAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5hZGRlZGZpbGUuY2FsbCh0aGlzLCBtb2NrRmlsZSk7CiAgICAgICAgICB0aGlzLm9wdGlvbnMudGh1bWJuYWlsLmNhbGwodGhpcywgbW9ja0ZpbGUsIHZhbCk7CiAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJyk7CiAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1jb21wbGV0ZScpOwogICAgICAgICAgdm0uaW5pdE9uY2UgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KGZpbGUsIGRvbmUpIHsKICAgICAgICAvKiDkuIPniZsqLwogICAgICAgIC8vIGNvbnN0IHRva2VuID0gdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbjsKICAgICAgICAvLyBnZXRUb2tlbih0b2tlbikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gICBmaWxlLnRva2VuID0gcmVzcG9uc2UuZGF0YS5xaW5pdV90b2tlbjsKICAgICAgICAvLyAgIGZpbGUua2V5ID0gcmVzcG9uc2UuZGF0YS5xaW5pdV9rZXk7CiAgICAgICAgLy8gICBmaWxlLnVybCA9IHJlc3BvbnNlLmRhdGEucWluaXVfdXJsOwogICAgICAgIC8vICAgZG9uZSgpOwogICAgICAgIC8vIH0pCiAgICAgICAgZG9uZSgpOwogICAgICB9LAogICAgICBzZW5kaW5nOiBmdW5jdGlvbiBzZW5kaW5nKGZpbGUsIHhociwgZm9ybURhdGEpIHsKICAgICAgICAvLyBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgZmlsZS50b2tlbik7CiAgICAgICAgLy8gZm9ybURhdGEuYXBwZW5kKCdrZXknLCBmaWxlLmtleSk7CiAgICAgICAgdm0uaW5pdE9uY2UgPSBmYWxzZTsKICAgICAgfQogICAgfSk7CiAgICBpZiAodGhpcy5jb3VsZFBhc3RlKSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5wYXN0ZUltZyk7CiAgICB9CiAgICB0aGlzLmRyb3B6b25lLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgdm0uJGVtaXQoJ2Ryb3B6b25lLXN1Y2Nlc3MnLCBmaWxlLCB2bS5kcm9wem9uZS5lbGVtZW50KTsKICAgIH0pOwogICAgdGhpcy5kcm9wem9uZS5vbignYWRkZWRmaWxlJywgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgdm0uJGVtaXQoJ2Ryb3B6b25lLWZpbGVBZGRlZCcsIGZpbGUpOwogICAgfSk7CiAgICB0aGlzLmRyb3B6b25lLm9uKCdyZW1vdmVkZmlsZScsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgIHZtLiRlbWl0KCdkcm9wem9uZS1yZW1vdmVkRmlsZScsIGZpbGUpOwogICAgfSk7CiAgICB0aGlzLmRyb3B6b25lLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChmaWxlLCBlcnJvciwgeGhyKSB7CiAgICAgIHZtLiRlbWl0KCdkcm9wem9uZS1lcnJvcicsIGZpbGUsIGVycm9yLCB4aHIpOwogICAgfSk7CiAgICB0aGlzLmRyb3B6b25lLm9uKCdzdWNjZXNzbXVsdGlwbGUnLCBmdW5jdGlvbiAoZmlsZSwgZXJyb3IsIHhocikgewogICAgICB2bS4kZW1pdCgnZHJvcHpvbmUtc3VjY2Vzc211bHRpcGxlJywgZmlsZSwgZXJyb3IsIHhocik7CiAgICB9KTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB0aGlzLnBhc3RlSW1nKTsKICAgIHRoaXMuZHJvcHpvbmUuZGVzdHJveSgpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVtb3ZlQWxsRmlsZXM6IGZ1bmN0aW9uIHJlbW92ZUFsbEZpbGVzKCkgewogICAgICB0aGlzLmRyb3B6b25lLnJlbW92ZUFsbEZpbGVzKHRydWUpOwogICAgfSwKICAgIHByb2Nlc3NRdWV1ZTogZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkgewogICAgICB0aGlzLmRyb3B6b25lLnByb2Nlc3NRdWV1ZSgpOwogICAgfSwKICAgIHBhc3RlSW1nOiBmdW5jdGlvbiBwYXN0ZUltZyhldmVudCkgewogICAgICB2YXIgaXRlbXMgPSAoZXZlbnQuY2xpcGJvYXJkRGF0YSB8fCBldmVudC5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGEpLml0ZW1zOwogICAgICBpZiAoaXRlbXNbMF0ua2luZCA9PT0gJ2ZpbGUnKSB7CiAgICAgICAgdGhpcy5kcm9wem9uZS5hZGRGaWxlKGl0ZW1zWzBdLmdldEFzRmlsZSgpKTsKICAgICAgfQogICAgfSwKICAgIGluaXRJbWFnZXM6IGZ1bmN0aW9uIGluaXRJbWFnZXModmFsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAoIXZhbCkgcmV0dXJuOwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgICAgdmFsLm1hcChmdW5jdGlvbiAodiwgaSkgewogICAgICAgICAgdmFyIG1vY2tGaWxlID0gewogICAgICAgICAgICBuYW1lOiAnbmFtZScgKyBpLAogICAgICAgICAgICBzaXplOiAxMjM0NSwKICAgICAgICAgICAgdXJsOiB2CiAgICAgICAgICB9OwogICAgICAgICAgX3RoaXMyLmRyb3B6b25lLm9wdGlvbnMuYWRkZWRmaWxlLmNhbGwoX3RoaXMyLmRyb3B6b25lLCBtb2NrRmlsZSk7CiAgICAgICAgICBfdGhpczIuZHJvcHpvbmUub3B0aW9ucy50aHVtYm5haWwuY2FsbChfdGhpczIuZHJvcHpvbmUsIG1vY2tGaWxlLCB2KTsKICAgICAgICAgIG1vY2tGaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2R6LXN1Y2Nlc3MnKTsKICAgICAgICAgIG1vY2tGaWxlLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2R6LWNvbXBsZXRlJyk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbW9ja0ZpbGUgPSB7CiAgICAgICAgICBuYW1lOiAnbmFtZScsCiAgICAgICAgICBzaXplOiAxMjM0NSwKICAgICAgICAgIHVybDogdmFsCiAgICAgICAgfTsKICAgICAgICB0aGlzLmRyb3B6b25lLm9wdGlvbnMuYWRkZWRmaWxlLmNhbGwodGhpcy5kcm9wem9uZSwgbW9ja0ZpbGUpOwogICAgICAgIHRoaXMuZHJvcHpvbmUub3B0aW9ucy50aHVtYm5haWwuY2FsbCh0aGlzLmRyb3B6b25lLCBtb2NrRmlsZSwgdmFsKTsKICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJyk7CiAgICAgICAgbW9ja0ZpbGUucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHotY29tcGxldGUnKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;AAOA;AACA;AACA;;AAEAA;AAEA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAI;IACA;IACAC;MACAL;MACAI;IACA;IACAE;MACAN;MACAI;IACA;IACAG;MACAP;MACAI;IACA;IACAI;MACAR;MACAI;IACA;IACAK;MACAT;MACAI;IACA;IACAM;MACAV;MACAI;IACA;IACAO;MACAX;MACAI;IACA;IACAQ;MACAZ;MACAI;IACA;IACAS;MACAb;MACAI;IACA;IACAU;MACAV;MACAJ;IACA;IACAe;MACAf;MACAI;IACA;EACA;EACAY;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAL;MACA;QACA;QACA;MACA;MACA;MACA;MACA;IACA;EACA;EACAM;IACA;IACA;IACA;MACAjB;MACAK;MACAD;MACAI;MACAD;MACAW;MACAC;MACAhB;MACAM;MACAW;MACAC;MACAC;MACAC;QAAA;QACA;QACA;QACA;UACA;UACAC;YACA;cAAAC;cAAAC;cAAA3B;YAAA;YACA;YACA;YACA4B;YACAA;YACAC;YACA;UACA;QACA;UACA;YAAAH;YAAAC;YAAA3B;UAAA;UACA;UACA;UACA4B;UACAA;UACAC;QACA;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;MACA;MACAC;QACA;QACA;QACAH;MACA;IACA;IAEA;MACAI;IACA;IAEA;MACAJ;IACA;IACA;MACAA;IACA;IACA;MACAA;IACA;IACA;MACAA;IACA;IACA;MACAA;IACA;EACA;EACAK;IACAD;IACA;EACA;EACAE;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAd;UACA;YAAAC;YAAAC;YAAA3B;UAAA;UACA;UACA;UACA4B;UACAA;UACA;QACA;MACA;QACA;UAAAF;UAAAC;UAAA3B;QAAA;QACA;QACA;QACA4B;QACAA;MACA;IACA;EAEA;AACA","names":["Dropzone","props","id","type","required","url","clickable","default","defaultMsg","acceptedFiles","thumbnailHeight","thumbnailWidth","showRemoveLink","maxFilesize","maxFiles","autoProcessQueue","useCustomDropzoneOptions","defaultImg","couldPaste","data","dropzone","initOnce","watch","mounted","dictRemoveFile","addRemoveLinks","dictDefaultMessage","dictMaxFilesExceeded","previewTemplate","init","val","name","size","mockFile","vm","accept","done","sending","document","destroyed","methods","removeAllFiles","processQueue","pasteImg","initImages"],"sourceRoot":"src/components/Dropzone","sources":["index.vue"],"sourcesContent":["<template>\n  <div :id=\"id\" :ref=\"id\" :action=\"url\" class=\"dropzone\">\n    <input type=\"file\" name=\"file\">\n  </div>\n</template>\n\n<script>\nimport Dropzone from 'dropzone'\nimport 'dropzone/dist/dropzone.css'\n// import { getToken } from 'api/qiniu';\n\nDropzone.autoDiscover = false\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      required: true\n    },\n    url: {\n      type: String,\n      required: true\n    },\n    clickable: {\n      type: Boolean,\n      default: true\n    },\n    defaultMsg: {\n      type: String,\n      default: '上传图片'\n    },\n    acceptedFiles: {\n      type: String,\n      default: ''\n    },\n    thumbnailHeight: {\n      type: Number,\n      default: 200\n    },\n    thumbnailWidth: {\n      type: Number,\n      default: 200\n    },\n    showRemoveLink: {\n      type: Boolean,\n      default: true\n    },\n    maxFilesize: {\n      type: Number,\n      default: 2\n    },\n    maxFiles: {\n      type: Number,\n      default: 3\n    },\n    autoProcessQueue: {\n      type: Boolean,\n      default: true\n    },\n    useCustomDropzoneOptions: {\n      type: Boolean,\n      default: false\n    },\n    defaultImg: {\n      default: '',\n      type: [String, Array]\n    },\n    couldPaste: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      dropzone: '',\n      initOnce: true\n    }\n  },\n  watch: {\n    defaultImg(val) {\n      if (val.length === 0) {\n        this.initOnce = false\n        return\n      }\n      if (!this.initOnce) return\n      this.initImages(val)\n      this.initOnce = false\n    }\n  },\n  mounted() {\n    const element = document.getElementById(this.id)\n    const vm = this\n    this.dropzone = new Dropzone(element, {\n      clickable: this.clickable,\n      thumbnailWidth: this.thumbnailWidth,\n      thumbnailHeight: this.thumbnailHeight,\n      maxFiles: this.maxFiles,\n      maxFilesize: this.maxFilesize,\n      dictRemoveFile: 'Remove',\n      addRemoveLinks: this.showRemoveLink,\n      acceptedFiles: this.acceptedFiles,\n      autoProcessQueue: this.autoProcessQueue,\n      dictDefaultMessage: '<i style=\"margin-top: 3em;display: inline-block\" class=\"material-icons\">' + this.defaultMsg + '</i><br>Drop files here to upload',\n      dictMaxFilesExceeded: '只能一个图',\n      previewTemplate: '<div class=\"dz-preview dz-file-preview\">  <div class=\"dz-image\" style=\"width:' + this.thumbnailWidth + 'px;height:' + this.thumbnailHeight + 'px\" ><img style=\"width:' + this.thumbnailWidth + 'px;height:' + this.thumbnailHeight + 'px\" data-dz-thumbnail /></div>  <div class=\"dz-details\"><div class=\"dz-size\"><span data-dz-size></span></div> <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>  <div class=\"dz-success-mark\"> <i class=\"material-icons\">done</i> </div>  <div class=\"dz-error-mark\"><i class=\"material-icons\">error</i></div></div>',\n      init() {\n        const val = vm.defaultImg\n        if (!val) return\n        if (Array.isArray(val)) {\n          if (val.length === 0) return\n          val.map((v, i) => {\n            const mockFile = { name: 'name' + i, size: 12345, url: v }\n            this.options.addedfile.call(this, mockFile)\n            this.options.thumbnail.call(this, mockFile, v)\n            mockFile.previewElement.classList.add('dz-success')\n            mockFile.previewElement.classList.add('dz-complete')\n            vm.initOnce = false\n            return true\n          })\n        } else {\n          const mockFile = { name: 'name', size: 12345, url: val }\n          this.options.addedfile.call(this, mockFile)\n          this.options.thumbnail.call(this, mockFile, val)\n          mockFile.previewElement.classList.add('dz-success')\n          mockFile.previewElement.classList.add('dz-complete')\n          vm.initOnce = false\n        }\n      },\n      accept: (file, done) => {\n        /* 七牛*/\n        // const token = this.$store.getters.token;\n        // getToken(token).then(response => {\n        //   file.token = response.data.qiniu_token;\n        //   file.key = response.data.qiniu_key;\n        //   file.url = response.data.qiniu_url;\n        //   done();\n        // })\n        done()\n      },\n      sending: (file, xhr, formData) => {\n        // formData.append('token', file.token);\n        // formData.append('key', file.key);\n        vm.initOnce = false\n      }\n    })\n\n    if (this.couldPaste) {\n      document.addEventListener('paste', this.pasteImg)\n    }\n\n    this.dropzone.on('success', file => {\n      vm.$emit('dropzone-success', file, vm.dropzone.element)\n    })\n    this.dropzone.on('addedfile', file => {\n      vm.$emit('dropzone-fileAdded', file)\n    })\n    this.dropzone.on('removedfile', file => {\n      vm.$emit('dropzone-removedFile', file)\n    })\n    this.dropzone.on('error', (file, error, xhr) => {\n      vm.$emit('dropzone-error', file, error, xhr)\n    })\n    this.dropzone.on('successmultiple', (file, error, xhr) => {\n      vm.$emit('dropzone-successmultiple', file, error, xhr)\n    })\n  },\n  destroyed() {\n    document.removeEventListener('paste', this.pasteImg)\n    this.dropzone.destroy()\n  },\n  methods: {\n    removeAllFiles() {\n      this.dropzone.removeAllFiles(true)\n    },\n    processQueue() {\n      this.dropzone.processQueue()\n    },\n    pasteImg(event) {\n      const items = (event.clipboardData || event.originalEvent.clipboardData).items\n      if (items[0].kind === 'file') {\n        this.dropzone.addFile(items[0].getAsFile())\n      }\n    },\n    initImages(val) {\n      if (!val) return\n      if (Array.isArray(val)) {\n        val.map((v, i) => {\n          const mockFile = { name: 'name' + i, size: 12345, url: v }\n          this.dropzone.options.addedfile.call(this.dropzone, mockFile)\n          this.dropzone.options.thumbnail.call(this.dropzone, mockFile, v)\n          mockFile.previewElement.classList.add('dz-success')\n          mockFile.previewElement.classList.add('dz-complete')\n          return true\n        })\n      } else {\n        const mockFile = { name: 'name', size: 12345, url: val }\n        this.dropzone.options.addedfile.call(this.dropzone, mockFile)\n        this.dropzone.options.thumbnail.call(this.dropzone, mockFile, val)\n        mockFile.previewElement.classList.add('dz-success')\n        mockFile.previewElement.classList.add('dz-complete')\n      }\n    }\n\n  }\n}\n</script>\n\n<style scoped>\n    .dropzone {\n        border: 2px solid #E5E5E5;\n        font-family: 'Roboto', sans-serif;\n        color: #777;\n        transition: background-color .2s linear;\n        padding: 5px;\n    }\n\n    .dropzone:hover {\n        background-color: #F6F6F6;\n    }\n\n    i {\n        color: #CCC;\n    }\n\n    .dropzone .dz-image img {\n        width: 100%;\n        height: 100%;\n    }\n\n    .dropzone input[name='file'] {\n        display: none;\n    }\n\n    .dropzone .dz-preview .dz-image {\n        border-radius: 0px;\n    }\n\n    .dropzone .dz-preview:hover .dz-image img {\n        transform: none;\n        filter: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .dropzone .dz-preview .dz-details {\n        bottom: 0px;\n        top: 0px;\n        color: white;\n        background-color: rgba(33, 150, 243, 0.8);\n        transition: opacity .2s linear;\n        text-align: left;\n    }\n\n    .dropzone .dz-preview .dz-details .dz-filename span, .dropzone .dz-preview .dz-details .dz-size span {\n        background-color: transparent;\n    }\n\n    .dropzone .dz-preview .dz-details .dz-filename:not(:hover) span {\n        border: none;\n    }\n\n    .dropzone .dz-preview .dz-details .dz-filename:hover span {\n        background-color: transparent;\n        border: none;\n    }\n\n    .dropzone .dz-preview .dz-remove {\n        position: absolute;\n        z-index: 30;\n        color: white;\n        margin-left: 15px;\n        padding: 10px;\n        top: inherit;\n        bottom: 15px;\n        border: 2px white solid;\n        text-decoration: none;\n        text-transform: uppercase;\n        font-size: 0.8rem;\n        font-weight: 800;\n        letter-spacing: 1.1px;\n        opacity: 0;\n    }\n\n    .dropzone .dz-preview:hover .dz-remove {\n        opacity: 1;\n    }\n\n    .dropzone .dz-preview .dz-success-mark, .dropzone .dz-preview .dz-error-mark {\n        margin-left: -40px;\n        margin-top: -50px;\n    }\n\n    .dropzone .dz-preview .dz-success-mark i, .dropzone .dz-preview .dz-error-mark i {\n        color: white;\n        font-size: 5rem;\n    }\n</style>\n"]}]}